<!DOCTYPE html>
<html>
<head>
    <title>Hello WebSocket</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js"></script>


    <script>
        // const stompClient = new StompJs.Client();
        // stompClient.webSocketFactory = function () {
        //     return new SockJS("https://psyduck.home:3000/ws")
        // }
        // stompClient.onConnect = (frame) => {
        //     console.log('Connected: ' + frame);
        //     // stompClient.subscribe('/in-game/topic/events', (greeting) => {
        //     //     console.log(JSON.parse(greeting.body).content);
        //     // });

        //     // stompClient.subscribe("/in-game/user/queue/mm", (greeting) => {
        //     //     console.log(JSON.parse(greeting.body).content);
        //     // });

        //     // stompClient.publish({
        //     //     destination: "/app/cmd",
        //     //     body: JSON.stringify({'name': '111'})
        //     // });

        // };

        // stompClient.onWebSocketError = (error) => {
        //     console.error('Error with websocket', error);
        // };

        // stompClient.onStompError = (frame) => {
        //     console.error('Broker reported error: ' + frame.headers['message']);
        //     console.error('Additional details: ' + frame.body);
        // };

        // stompClient.activate();

        conn = new WebSocket("wss://psyduck.home:3000/ws?t=eyJhbGciOiJSUzI1NiIsImtpZCI6ImNlcnQtYnVpbHQtaW4iLCJ0eXAiOiJKV1QifQ.eyJhdWQiOlsiMzhlMTE4MzcxYWNlYjUzNTc0YjYiXSwiZXhwIjoxNzEzNzA1OTE2LCJncm91cHMiOlsiZ2FycHRlYS91c2VyX2dyb3VwIl0sImlhdCI6MTcxMzEwMTExNiwiaWQiOiI1OTc2ODdiNy04ODk5LTQ3NzctOTY1Yy1jZWU5ZGNjNmNmMWMiLCJpc09ubGluZSI6ZmFsc2UsImlzcyI6Imh0dHA6Ly8xOTIuMTY4LjAuMTA0OjgwMDAiLCJqdGkiOiJhZG1pbi85ZjMxMmNkYS1hYmQ2LTQ2MDAtYWNkMS1jNWUyMDhjMTQ5YzkiLCJuYW1lIjoidXNlciIsIm5iZiI6MTcxMzEwMTExNiwibm9uY2UiOiIiLCJzY29wZSI6Im9wZW5pZCIsInN1YiI6IjU5NzY4N2I3LTg4OTktNDc3Ny05NjVjLWNlZTlkY2M2Y2YxYyIsInRhZyI6InN0YWZmIiwidG9rZW5UeXBlIjoiYWNjZXNzLXRva2VuIn0.Q6VeYsdqBToDEIUnZnjbjhoogYvGHyMfXA9k3Bdx5ydsvxpx7zOicv-lpg-Wih4JXXfaqO5204tfUtXzvXHIGEF17n97U5Lt_LRJB8yKU_n4ARWu9cgOfvgpkjXWWWlWNx65ROeyBkLm-WIARRF78DCkf5f_ANMUriLVg4F9DE8Cq_JsKm3DQKbV3FF6V23bsFbvnx03tmZoCwClSClK5nrRI0ymTjg_Ta2kUaYDuK1NPh7pcbUa6DVLwS-pWKwu3YjgL6mAqN9Nqs0hEBwx3CdFPXaSerPWEXgLfS9nvFK_5WeyEQRWktT7g-rKbNlFqHo5JtBpOuaewzkaYsUlIap8W-_1i78Zm-CAYnAI_xwL5wkhFPzETp1xA4NrKaa6MLGQqRjS_eWDBZq2x4GCAeQi8gjEa3-hhaxSSszAUREY8DZBuPNjioCoc_yvMDtiydEpw0GnfTGVgNngArmwwMy07wcr_5WpRNIraYyLRRlYcWC1PkZavZ2dk5jqHzL8W1vsAhV4rLHf5VoRVqXQChDbtavh6q801S5calBLk-Ao4IHeWWIYaPod3W51TQ9Jrw0gcT-lzKIhd4-8p0pN9m9QbeK2LO8dqNOKlIr6hluuxxJfw0PffKsFgKlQ7M-MnTLySiDXO922RFCXlVbeJnzQ4l6JsDMWpJBVm5J2gNU")
        
        conn.onopen = function(e) {
            console.log(e)
            conn.send("test")
        }
        conn.onmessage = function(event) {
            console.log(event)
        }
        conn.onclose = function(event) {
            console.log("close")
        }
    </script>
</head>
<body>

</body>
</html>