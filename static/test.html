<!DOCTYPE html>
<html>
<head>
    <title>Hello WebSocket</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js"></script>


    <script>
        // const stompClient = new StompJs.Client();
        // stompClient.webSocketFactory = function () {
        //     return new SockJS("https://psyduck.home:3000/ws")
        // }
        // stompClient.onConnect = (frame) => {
        //     console.log('Connected: ' + frame);
        //     // stompClient.subscribe('/in-game/topic/events', (greeting) => {
        //     //     console.log(JSON.parse(greeting.body).content);
        //     // });

        //     // stompClient.subscribe("/in-game/user/queue/mm", (greeting) => {
        //     //     console.log(JSON.parse(greeting.body).content);
        //     // });

        //     // stompClient.publish({
        //     //     destination: "/app/cmd",
        //     //     body: JSON.stringify({'name': '111'})
        //     // });

        // };

        // stompClient.onWebSocketError = (error) => {
        //     console.error('Error with websocket', error);
        // };

        // stompClient.onStompError = (frame) => {
        //     console.error('Broker reported error: ' + frame.headers['message']);
        //     console.error('Additional details: ' + frame.body);
        // };

        // stompClient.activate();

        conn = new WebSocket("wss://psyduck.home:3000/ws?t=eyJhbGciOiJSUzI1NiIsImtpZCI6ImNlcnQtYnVpbHQtaW4iLCJ0eXAiOiJKV1QifQ.eyJhdWQiOlsiMzhlMTE4MzcxYWNlYjUzNTc0YjYiXSwiZXhwIjoxNzE0MTQxNjYyLCJncm91cHMiOlsiZ2FycHRlYS91c2VyX2dyb3VwIl0sImlhdCI6MTcxMzUzNjg2MiwiaWQiOiI1OTc2ODdiNy04ODk5LTQ3NzctOTY1Yy1jZWU5ZGNjNmNmMWMiLCJpc09ubGluZSI6ZmFsc2UsImlzcyI6Imh0dHA6Ly8xOTIuMTY4LjAuMTA0OjgwMDAiLCJqdGkiOiJhZG1pbi80OWIxYjgzMi05MGUyLTQ0NWYtYTdjMS04YjBjMjgyNTQwMzYiLCJuYW1lIjoidXNlciIsIm5iZiI6MTcxMzUzNjg2Miwibm9uY2UiOiIiLCJzY29wZSI6Im9wZW5pZCIsInN1YiI6IjU5NzY4N2I3LTg4OTktNDc3Ny05NjVjLWNlZTlkY2M2Y2YxYyIsInRhZyI6InN0YWZmIiwidG9rZW5UeXBlIjoiYWNjZXNzLXRva2VuIn0.FwvlCjQlk3gFgtQhzIqMHHrqffMTEzeFGidA7Pxv7V7EV6TkJ4vQz1QdKrgnwJG7F4xGYiQGSQYL0kAY7LIBL4cf2TLi5PnfovX1c-19cirYAU4lT5Xc5cayjSxEgKKkZCxTNKcPYVYBk2h_rCadTNsKwnX7VR6Yx-UFLtB9brbjmuxAvpO8vfTjE69pN9w8cZUBpSGPRaDMOTtvdi2Yxoe5TUXO65G9g-T6B6LUMBZYTvPf5rxCgBZsZYOR-Eg9Ehh17zqTTNxEYO8ua3jlYvrI217OPN0eEPpOEKHB3cQkSpXNBeJZi2znPw5o0sOx2-yEKd8PcJrm0Vusht1JixwlXBiU-63CeV86zOPIR_OHCjzssjhYZmuVMZmq57pt6sCr0biEoCF9MgUKu9umwQ5PrALKYh2efsS8idtUofYeyKaghwevDIARGM72Ym-TMI0et9QwM6Z_Fe54fS9l8EsfdaX-tNN_cja86kwOlH7HEw67YaPUlbytMz3Sv_Pw_1gQggcXobC6noZP-ClF8NSuqLmVa0azH8x5I9W-4j6PeE-ovmT1d0pIBkueZNdMZavGbqu8OmsBefmpYoxOpma8hwFnLj-jpRpmos7pNXo-iqoISgA2Wt3GhAmpfB04GoLmWK3K4EXcvRxdGHORnKlPMXOPZ4ukcp4YhJWHQ3A")
        conn.onopen = function(e) {
            console.log(e)
            conn.send("test")
        }
        conn.onclose = function(e) {
            console.log(e)
        }
        conn.onmessage = function(e) {
            console.log(e)
        }
        function disc() {
            conn.close(1000)
        }
    </script>
</head>
<body>

</body>
</html>